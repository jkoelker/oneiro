[defaults]
model = "zimage-turbo"
width = 1024
height = 1024

[queue]
max_global = 100
max_per_user = 20

[models.zimage-turbo]
type = "zimage"
repo = "Tongyi-MAI/Z-Image-Turbo"
steps = 9
guidance_scale = 0.0

[models.flux2-dev]
type = "flux2"
repo = "diffusers/FLUX.2-dev-bnb-4bit"
quantized = true
cpu_offload = true
steps = 28
guidance_scale = 4.0

[models.qwen-image]
type = "qwen"
repo = "Qwen/Qwen-Image"
transformer = "unsloth/Qwen-Image-GGUF:qwen-image-Q4_K_S.gguf"
lora = "lightx2v/Qwen-Image-Lightning"
lora_weights = "Qwen-Image-Lightning-8steps-V1.0.safetensors"
cpu_offload = true
steps = 8
true_cfg_scale = 1.3
requires_negative = true

[blacklist]
words = ["loli", "shota", "child", "children", "minor", "underage"]
allow_in_negative = true

# =============================================================================
# LORAS - Named LoRA definitions (reusable across models)
# =============================================================================

[loras]
# Global auto_load: these LoRAs are loaded for ALL models automatically
# auto_load = ["realism-enhancer"]

# Example: Civitai LoRA
# [loras.realism-enhancer]
# source = "civitai"
# id = 123456
# weight = 0.5

# Example: Civitai LoRA via URL
# [loras.detail-lora]
# source = "civitai"
# url = "https://civitai.com/models/789012"
# weight = 0.8

# Example: HuggingFace LoRA
# [loras.flux-realism]
# source = "huggingface"
# repo = "XLabs-AI/flux-RealismLora"
# weight_name = "lora.safetensors"
# weight = 0.7

# Example: Local LoRA
# [loras.custom-style]
# source = "local"
# path = "~/.cache/loras/custom-style.safetensors"
# weight = 1.0

# Models can reference LoRAs by name:
# [models.my-model]
# loras = ["realism-enhancer", "detail-lora"]
#
# Or define inline LoRAs for model-specific use:
# [[models.my-model.inline_loras]]
# source = "civitai"
# id = 99999
# weight = 0.7

# =============================================================================
# EMBEDDINGS - Named textual inversion definitions (reusable across models)
# =============================================================================

[embeddings]
# Global auto_load: these embeddings are loaded for ALL models automatically
# auto_load = ["easynegative"]

# Example: Civitai embedding
# [embeddings.easynegative]
# source = "civitai"
# id = 7808
# token = "easynegative"

# Example: Civitai embedding via URL
# [embeddings.bad-hands]
# source = "civitai"
# url = "https://civitai.com/models/116230"
# token = "bad-hands-5"

# Example: HuggingFace embedding
# [embeddings.cat-toy]
# source = "huggingface"
# repo = "sd-concepts-library/cat-toy"
# # token auto-detected from embedding file

# Example: Local embedding
# [embeddings.custom]
# source = "local"
# path = "~/.cache/embeddings/custom.safetensors"
# token = "<custom>"

# Models can reference embeddings by name:
# [models.my-model]
# embeddings = ["easynegative", "bad-hands"]
#
# Or define inline embeddings for model-specific use:
# [[models.my-model.inline_embeddings]]
# source = "civitai"
# id = 99999
# token = "model-specific-style"

[civitai]
# API key for authentication (optional, enables restricted downloads)
# api_key = "${CIVITAI_API_KEY}"
cache_dir = "~/.cache/civitai"
download_timeout = 3600  # 1 hour for large files
verify_hashes = true

# =============================================================================
# CIVITAI CHECKPOINT EXAMPLES - Using type = "civitai" for full model downloads
# =============================================================================
#
# CivitAI checkpoints can be loaded using the "civitai" pipeline type.
# The system auto-detects the appropriate diffusers pipeline based on
# the model's baseModel metadata from CivitAI.
#
# Supported base models include:
# - SD 1.5, SD 2.1 (512x512 default)
# - SDXL 1.0, SDXL Turbo, SDXL Lightning, Pony, Illustrious (1024x1024)
# - Flux.1 Dev, Flux.1 Schnell (1024x1024, no negative prompt)
# - SD 3, SD 3.5 Medium/Large (1024x1024)
# - PixArt Alpha/Sigma, Kolors, Hunyuan DiT, AuraFlow
#
# Example 1: CivitAI checkpoint by model ID (downloads automatically)
# [models.civitai-example]
# type = "civitai"
# civitai_model_id = 12345        # Required: CivitAI model ID
# civitai_version_id = 67890      # Optional: specific version (default: latest)
# cpu_offload = true              # Optional: enable CPU offloading (default: true)
#
# Example 2: CivitAI checkpoint with base model override
# [models.pony-checkpoint]
# type = "civitai"
# civitai_model_id = 257749       # Pony Diffusion V6 XL
# base_model = "Pony"             # Override auto-detection if needed
# steps = 25
# guidance_scale = 7.0
#
# Example 3: Local checkpoint file (already downloaded)
# [models.local-sdxl]
# type = "civitai"
# checkpoint_path = "~/.cache/civitai/models/my_model.safetensors"
# base_model = "SDXL 1.0"         # Required when using local path
#
# Example 4: CivitAI checkpoint with LoRAs
# [models.civitai-with-loras]
# type = "civitai"
# civitai_model_id = 12345
# [[models.civitai-with-loras.loras]]
# source = "civitai"
# id = 99999
# weight = 0.8
#
# Example 5: Manual pipeline override (advanced)
# [models.custom-pipeline]
# type = "civitai"
# checkpoint_path = "/path/to/model.safetensors"
# pipeline_class = "StableDiffusionXLPipeline"  # Manual override
# steps = 30
# guidance_scale = 5.0
# supports_negative_prompt = true
