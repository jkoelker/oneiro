[defaults]
model = "zimage-turbo"
width = 1024
height = 1024

[queue]
max_global = 100
max_per_user = 20

[models.zimage-turbo]
type = "zimage"
repo = "Tongyi-MAI/Z-Image-Turbo"
steps = 9
guidance_scale = 0.0

[models.flux2-dev]
type = "flux2"
repo = "diffusers/FLUX.2-dev-bnb-4bit"
quantized = true
cpu_offload = true
steps = 28
guidance_scale = 4.0

[models.qwen-image]
type = "qwen"
repo = "Qwen/Qwen-Image"
transformer = "unsloth/Qwen-Image-GGUF:qwen-image-Q4_K_S.gguf"
lora = "lightx2v/Qwen-Image-Lightning"
lora_weights = "Qwen-Image-Lightning-8steps-V1.0.safetensors"
cpu_offload = true
steps = 8
true_cfg_scale = 1.3
requires_negative = true

[blacklist]
words = ["loli", "shota", "child", "children", "minor", "underage"]
allow_in_negative = true

# =============================================================================
# EMBEDDINGS - Named textual inversion definitions (reusable across models)
# =============================================================================

[embeddings]
# Global auto_load: these embeddings are loaded for ALL models automatically
# auto_load = ["easynegative"]

# Example: Civitai embedding
# [embeddings.easynegative]
# source = "civitai"
# id = 7808
# token = "easynegative"

# Example: Civitai embedding via URL
# [embeddings.bad-hands]
# source = "civitai"
# url = "https://civitai.com/models/116230"
# token = "bad-hands-5"

# Example: HuggingFace embedding
# [embeddings.cat-toy]
# source = "huggingface"
# repo = "sd-concepts-library/cat-toy"
# # token auto-detected from embedding file

# Example: Local embedding
# [embeddings.custom]
# source = "local"
# path = "~/.cache/embeddings/custom.safetensors"
# token = "<custom>"

# Models can reference embeddings by name:
# [models.my-model]
# embeddings = ["easynegative", "bad-hands"]
#
# Or define inline embeddings for model-specific use:
# [[models.my-model.inline_embeddings]]
# source = "civitai"
# id = 99999
# token = "model-specific-style"

[civitai]
# API key for authentication (optional, enables restricted downloads)
# api_key = "${CIVITAI_API_KEY}"
cache_dir = "~/.cache/civitai"
download_timeout = 3600  # 1 hour for large files
verify_hashes = true
